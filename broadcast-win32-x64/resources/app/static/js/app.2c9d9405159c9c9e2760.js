webpackJsonp([4],{"33iW":function(e,t,n){"use strict";t.a={baseURL:"http://"+localStorage.host||"http://localhost:8080",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:5e3,responseType:"json",withCredentials:!0}},"4YZs":function(e,t){},"7xIN":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("cfvZ"),r=n.n(o),c=n("FevL"),a=n("34v0"),i=n.n(a),u=n("EcfS"),s={name:"App",computed:i()({},Object(u.c)({loading:"loading"}))},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-row",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"container-box",attrs:{"element-loading-background":"rgba(255, 255, 255, 0.5)"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]};var l=n("Aizv")(s,d,!1,function(e){n("lIv9")},null,null).exports,g=n("Sxqw"),f=n.n(g),h=n("1eSk"),p=[{path:"/",name:"Login",component:function(){return n.e(0).then(n.bind(null,"T+/8"))}},{path:"/login",name:"login",component:function(){return n.e(0).then(n.bind(null,"T+/8"))}}],m=[{path:"/broadcast",name:"Broadcast",component:function(){return n.e(1).then(n.bind(null,"7/+r"))}},{path:"/broadcast/edit/:id",name:"BroadcastEdit",component:function(){return n.e(2).then(n.bind(null,"Scwj"))}}];c.default.use(h.a);var v=new h.a({routes:[].concat(f()(p),f()(m))}),b=n("UIuv"),R=n.n(b),w=n("33iW"),y=n("hs4R"),k=n.n(y),j=(n("mQOt"),n("MqtZ")),L=n.n(j),O=k.a.create(w.a),M=function(e){return"/api/v1"+e};O.interceptors.request.use(function(e){return sessionStorage.token&&(e.headers.common.Authorization=sessionStorage.token),F.commit("showLoading"),e},function(e){return R.a.reject(e)}),O.interceptors.response.use(function(e){return F.commit("hideLoading"),e},function(e){return F.commit("hideLoading"),function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(j.Message)({type:t,message:e,showClose:n})};switch(e.response?e.response.status:"undefined"){case 504:t("确定服务器启动");break;case 404:t("找不到服务器资源");break;case 403:t("当前用户未授权");break;case"undefined":t("服务端未响应，请求超时");break;default:t(e.message)}return R.a.reject(e)}(e)});var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O.get(M(e),{params:t}).then(function(e){return e.data}).catch(function(e){return e})},C=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O.post(M(e),t,n).then(function(e){return e.data}).catch(function(e){return e})}("/login",e).then(function(e){return e}).catch(function(e){return e})},E={state:{token:""},actions:{login:function(e,t){var n=e.commit;C(t).then(function(e){return n("login",e)}).catch(function(e){return console.log(e)})}},mutations:{login:function(e,t){var n=t.token,o=t.code;sessionStorage.setItem("token",n),e.token=n,200===o?(Object(j.Message)({type:"success",message:"登录成功",showClose:!0}),v.push({path:"/broadcast"})):404===o&&Object(j.Message)({type:"error",message:"用户名或者密码不正确",showClose:!0})}},getters:{token:function(e){return e.token}}},I=function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O.patch(M(e),t,n).then(function(e){return e.data}).catch(function(e){return e})}("/recordings/"+e,t).then(function(e){return e}).catch(function(e){return e})},B=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O.delete(M(e),t).then(function(e){return e.data}).catch(function(e){return e})}("/recordings/"+e).then(function(e){return e}).catch(function(e){return e})},x={state:{broadcastList:[],broadForEdit:{},updateRecordingResult:{},deleteRecordingResult:{}},actions:{getRecordings:function(e,t){var n=e.commit;(function(e){return S("/recordings",e).then(function(e){return e}).catch(function(e){return e})})(t).then(function(e){return 200===e.code&&n("getRecordings",e)}).catch(function(e){return console.log(e)})},getRecordingById:function(e,t){var n=e.commit;(function(e){return S("/recordings/"+e).then(function(e){return e}).catch(function(e){return e})})(t).then(function(e){return 200===e.code&&n("getRecordingById",e)}).catch(function(e){return console.log(e)})},updateRecording:function(e,t){var n=e.commit,o=t.id,r=t.content;I(o,{content:r}).then(function(e){return n("updateRecording",e)}).catch(function(e){return console.log(e)})},deleteBroadcast:function(e,t){var n=e.commit;B(t).then(function(e){return n("deleteBroadcast",e)}).catch(function(e){return console.log(e)})}},mutations:{getRecordings:function(e,t){var n=t.recordings;e.broadcastList=n||[]},getRecordingById:function(e,t){var n=t.recording;e.broadForEdit=n},updateRecording:function(e,t){200===t.code?Object(j.Message)({type:"success",message:"修改语音内容成功",showClose:!0}):Object(j.Message)({type:"error",message:"修改语音内容失败",showClose:!0}),e.updateRecordingResult=t},logout:function(e){v.replace({path:"/login"}),Object(j.Message)({type:"success",message:"退出登录成功",showClose:!0})},deleteBroadcast:function(e,t){200===t.code?Object(j.Message)({type:"success",message:"删除语音成功",showClose:!0}):Object(j.Message)({type:"error",message:"删除语音失败",showClose:!0}),e.deleteRecordingResult=t}},getters:{broadcastList:function(e){return e.broadcastList},broadForEdit:function(e){return e.broadForEdit},updateRecordingResult:function(e){return e.updateRecordingResult},deleteRecordingResult:function(e){return e.deleteRecordingResult}}};c.default.use(u.a);var F=new u.a.Store({modules:{login:E,loading:{state:{loading:!1},mutations:{showLoading:function(e){e.loading=!0},hideLoading:function(e){e.loading=!1}},getters:{loading:function(e){return e.loading}}},broadcast:x}}),A=n("EwYn"),N=n.n(A),T=(n("4YZs"),n("7xIN"),n("lOay"),{Date:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}})}),_=i()({},T);c.default.use(L.a),c.default.use(N.a),c.default.config.productionTip=!1,r()(_).forEach(function(e){return c.default.filter(e,_[e])}),c.default.prototype.$_baseURL=w.a.baseURL,new c.default({el:"#app",router:v,store:F,components:{App:l},template:"<App/>"})},lIv9:function(e,t){},lOay:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2c9d9405159c9c9e2760.js.map