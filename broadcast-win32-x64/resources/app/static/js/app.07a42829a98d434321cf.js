webpackJsonp([5],{"33iW":function(e,n,t){"use strict";n.a={baseURL:"http://"+localStorage.host||"http://localhost:8080",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:5e3,responseType:"json",withCredentials:!0}},"7xIN":function(e,n){},KNSE:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("cfvZ"),r=t.n(o),c=t("FevL"),i=t("34v0"),a=t.n(i),u=t("EcfS"),s={name:"App",computed:a()({},Object(u.c)({loading:"loading"}))},d={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"container-box",attrs:{"element-loading-background":"rgba(255, 255, 255, 0.5)"}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)],1)},staticRenderFns:[]};var g=t("Aizv")(s,d,!1,function(e){t("lIv9")},null,null).exports,l=t("Sxqw"),f=t.n(l),h=t("1eSk"),p=[{path:"/",name:"Login",component:function(){return t.e(0).then(t.bind(null,"T+/8"))}},{path:"/login",name:"login",component:function(){return t.e(0).then(t.bind(null,"T+/8"))}}],m=[{path:"/broadcast",name:"Broadcast",component:function(){return t.e(1).then(t.bind(null,"7/+r"))}},{path:"/broadcast/edit/:id",name:"BroadcastEdit",component:function(){return t.e(3).then(t.bind(null,"Scwj"))}},{path:"/broadcast/merge",name:"BroadcastMerge",component:function(){return t.e(2).then(t.bind(null,"w0j6"))}}];c.default.use(h.a);var v=new h.a({routes:[].concat(f()(p),f()(m))});v.beforeEach(function(e,n,t){var o=sessionStorage.token;"/login"!==e.path?o?t():t({path:"/login",query:{redirect:e.fullPath}}):t()});var R=v,b=t("UIuv"),w=t.n(b),k=t("33iW"),y=t("hs4R"),S=t.n(y),j=(t("mQOt"),t("qMKp")),M=t.n(j),C=S.a.create(k.a),L=function(e){return"/api/v1"+e};C.interceptors.request.use(function(e){return sessionStorage.token&&(e.headers.common.Authorization=sessionStorage.token),x.commit("showLoading"),e},function(e){return w.a.reject(e)}),C.interceptors.response.use(function(e){return x.commit("hideLoading"),e},function(e){return x.commit("hideLoading"),function(e){var n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(j.Message)({type:n,message:e,showClose:t})};switch(e.response?e.response.status:"undefined"){case 504:n("确定服务器启动");break;case 404:n("找不到服务器资源");break;case 403:n("当前用户未授权");break;case"undefined":n("服务端未响应，请求超时");break;default:n(e.message)}return w.a.reject(e)}(e)});var O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.get(L(e),{params:n}).then(function(e){return e.data}).catch(function(e){return e})},I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C.post(L(e),n,t).then(function(e){return e.data}).catch(function(e){return e})},E={state:{token:""},actions:{login:function(e,n){var t=e.commit;(function(e){return I("/login",e).then(function(e){return e}).catch(function(e){return e})})(n).then(function(e){return t("login",e)}).catch(function(e){return console.log(e)})}},mutations:{login:function(e,n){var t=n.token,o=n.code;sessionStorage.setItem("token",t),e.token=t,200===o?(Object(j.Message)({type:"success",message:"登录成功",showClose:!0}),R.push({path:"/broadcast"})):404===o&&Object(j.Message)({type:"error",message:"用户名或者密码不正确",showClose:!0})}},getters:{token:function(e){return e.token}}},D=function(e,n){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C.patch(L(e),n,t).then(function(e){return e.data}).catch(function(e){return e})}("/recordings/"+e,n).then(function(e){return e}).catch(function(e){return e})},B=function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.delete(L(e),n).then(function(e){return e.data}).catch(function(e){return e})}("/recordings/"+e).then(function(e){return e}).catch(function(e){return e})},U={state:{broadcastList:[],broadForEdit:{},updateRecordingResult:{},deleteRecordingResult:{},checkedRecording:{},contents:"",mergeRecordingResult:{},downloadUrl:"",recordingDetail:{}},actions:{getRecordings:function(e,n){var t=e.commit;(function(e){return O("/recordings",e).then(function(e){return e}).catch(function(e){return e})})(n).then(function(e){return 200===e.code&&t("getRecordings",e)}).catch(function(e){return console.log(e)})},getRecordingById:function(e,n){var t=e.commit;(function(e){return O("/recordings/"+e).then(function(e){return e}).catch(function(e){return e})})(n).then(function(e){return 200===e.code&&t("getRecordingById",e)}).catch(function(e){return console.log(e)})},updateRecording:function(e,n){var t=e.commit,o=n.id,r=n.content;D(o,{content:r}).then(function(e){return t("updateRecording",e)}).catch(function(e){return console.log(e)})},deleteBroadcast:function(e,n){var t=e.commit;B(n).then(function(e){return t("deleteBroadcast",e)}).catch(function(e){return console.log(e)})},sendRecordingIds:function(e,n){var t=e.commit;(function(e){return I("/merges",{ids:e}).then(function(e){return e}).catch(function(e){return e})})(n).then(function(e){return 200===e.code&&t("sendRecordingIds",e)}).catch(function(e){return console.log(e)})},getRecordingDetail:function(e,n){var t=e.commit;(function(e){return O("/recordings/"+e).then(function(e){return e}).catch(function(e){return e})})(n).then(function(e){return 200===e.code&&t("getRecordingDetail",e)}).catch(function(e){return console.log(e)})}},mutations:{getRecordings:function(e,n){var t=n.recordings;e.broadcastList=t||[]},getRecordingById:function(e,n){var t=n.recording;e.broadForEdit=t},updateRecording:function(e,n){200===n.code?Object(j.Message)({type:"success",message:"修改语音内容成功",showClose:!0}):Object(j.Message)({type:"error",message:"修改语音内容失败",showClose:!0}),e.updateRecordingResult=n},logout:function(e){sessionStorage.setItem("token",""),sessionStorage.token?j.Message.error({message:"退出登录失败",showClose:!0}):(R.push({path:"/login"}),Object(j.Message)({type:"success",message:"退出登录成功",showClose:!0}))},deleteBroadcast:function(e,n){200===n.code?Object(j.Message)({type:"success",message:"删除语音成功",showClose:!0}):Object(j.Message)({type:"error",message:"删除语音失败",showClose:!0}),e.deleteRecordingResult=n},mergeRecording:function(e,n){e.checkedRecording=n,R.push({path:"/broadcast/merge"})},sendRecordingIds:function(e,n){var t=n.recording.download_url,o=n.recording.content,r=n.code;e.contents=o,e.downloadUrl=t,e.mergeRecordingResult=n,200===r?Object(j.Message)({type:"success",message:"合并记录成功",showClose:!0}):j.Message.error({message:"合并记录失败",showClose:!0})},getRecordingDetail:function(e,n){var t=n.recording;e.recordingDetail=t}},getters:{broadcastList:function(e){return e.broadcastList},broadForEdit:function(e){return e.broadForEdit},updateRecordingResult:function(e){return e.updateRecordingResult},deleteRecordingResult:function(e){return e.deleteRecordingResult},checkedRecording:function(e){return e.checkedRecording},contents:function(e){return e.contents},mergeRecordingResult:function(e){return e.mergeRecordingResult},downloadUrl:function(e){return e.downloadUrl},recordingDetail:function(e){return e.recordingDetail}}};c.default.use(u.a);var x=new u.a.Store({modules:{login:E,loading:{state:{loading:!1},mutations:{showLoading:function(e){e.loading=!0},hideLoading:function(e){e.loading=!1}},getters:{loading:function(e){return e.loading}}},broadcast:U}}),F=t("EwYn"),N=t.n(F),_=(t("KNSE"),t("7xIN"),t("lOay"),{Date:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}(function(e){if(e){var n=new Date(e);return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()}})}),A=a()({},_);c.default.use(M.a),c.default.use(N.a),c.default.config.productionTip=!1,r()(A).forEach(function(e){return c.default.filter(e,A[e])}),c.default.prototype.$_baseURL=k.a.baseURL,new c.default({el:"#app",router:R,store:x,components:{App:g},template:"<App/>"})},lIv9:function(e,n){},lOay:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.07a42829a98d434321cf.js.map